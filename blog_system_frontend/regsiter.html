<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Register </title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<header>

    <script>
        $(document).ready(function() {
            $('#menu').load('/header.html');
        });
    </script>

    <div id="menu">

    </div>
    
</header>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <div class="container-fluid mt-5 px-xl-5 py-5 mx-auto">
        <div class="card card0 border-0">
            <div class="row d-flex">
                <div class="col-lg-6">
                    <div class="card1 pb-5">
                        
                        <div class="img-center border-line"> <img src="sleware.png" class="image"> </div>

                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card2 card border-0 px-4">
                        <div class="row mb-4 px-3">
                            <h3 class="mb-0 mr-4 mt-2">Register</h3>
                        </div>

                        <div class="row px-3"> <label class="mb-1">
                            <h6 class="mb-0 text-sm">Username</h6>
                            </label> <input class="mb-4" type="text" name="user" id="user" placeholder="Enter a username"> 
                        </div>

                        <div class="row px-3"> <label class="mb-1">
                            <h6 class="mb-0 text-sm">Password</h6>
                            </label> <input type="password" name="password" id="password" placeholder="Enter password"> 
                        </div>

                        <div class="row mt-4 px-3"> <label class="mb-1">
                            <h6 class="mb-0 text-sm">Confirm Password</h6>
                            </label> <input class="mb-4" type="password" name="password-confirm" id="password-confirm" placeholder="Enter your password again to confirm"> 
                        </div>

                        <button type="submit" class="login-button" onclick="register();">Register</button>
                        <div class="my-3">
                            <p id="status"></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-blue py-4">
                <div class="row px-3"> <small class="ml-4 ml-sm-5">Copyright &copy; 2022. All rights reserved.</small>

                    <div class="social-contact ml-4 ml-sm-auto"><span class="fa fa-linkedin mr-4 text-sm"></span> <span class="fa fa-twitter mr-4 mr-sm-5 text-sm"></span> </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function register(){
            var username = $("#user").val();
            var password = $("#password").val();
            var passwordconfirm = $("#password-confirm").val();

            var settings = {
                "url": "http://localhost:3000/api/sign-up",
                "method": "POST",
                "timeout": 0,
                "headers": {
                    "Content-Type": "application/json"
                },
                "data": JSON.stringify({
                    "username": username,
                    "password": password,
                    "password_repeat": passwordconfirm
                }),
            };

            $.ajax(settings).done(function (response) {
                $('#status').text("Account Registered");

            }).fail(function(jqXHR, textStatus){
                $('#status').text("Account Registration Failed");

            });
        }
    </script>
</body>

</html>